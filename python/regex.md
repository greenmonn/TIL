# Python에서 정규식 쓰기

```
import re
```

기본으로 제공하는 `re` 모듈을 임포트하면 파이썬에서 정규식 쓸 준비는 모두 끝난다.

## 메타 문자
> 메타 문자란 원래 그 문자가 가진 뜻이 아닌 특별한 용도로 사용되는 문자를 말한다.  

### 문자 클래스 [ ]
[와 ] 사이의 문자들 중 하나를 포함하는지

```
[abc]: a, b, c 중 한 개의 문자를 포함할 때 match
[a-zA-Z0-9]: 알파벳 또는 숫자를 포함할 때 match
[^0-9]: 숫자를 포함하지 않을 때 match
```

문자 클래스 | 동일 표현
------------ | ------------
`\d` | [0-9]와 동일
`\D` | [^0-9]
`\s` | [ \t\n\r\f\v]
`\S` | [^ \t\n\r\f\v]
`\w` | [a-zA-Z0-9_]
`\W`| [^a-zA-Z0-9_]

### Dot(.)
`\n` 을 제외한 모든 문자와 match
python에서는 정규식 작성 시 옵션으로 `re.DOTALL` 옵션을 주면 `\n` 문자와도 매치되게 할 수 있다.

```
p = re.compile(r'`(.*)`', re.DOTALL)
```

### 반복을 표현하는 메타문자

`*` 메타문자는 0부터, `+` 메타문자는 최소 1번 이상부터 반복될 때 사용한다.

또한, 반복 횟수를 정확히 제한하고 싶을 때, `{m}` 의 경우에는 정확히 m번 반복하고,  `{m, n}` 의 경우에는 m번 이상 n번 이하 반복하는 것을 의미한다.

### ?
있어도 되고 없어도 되고.
```
ab?c: "abc", "ac" 모두 매치된다.
```

### |
“or”의 의미와 동일하다. 즉 매치되는 경우의 범위가 더 넓어진다.

```
>>> p = re.compile('Crow|Servo')
>>> m = p.match('CrowHello')
>>> print(m)
<_sre.SRE_Match object; span=(0, 4), match='Crow'>
```

### ^
문자열의 맨 처음과 일치. 여러 줄일 때에는 각 라인의 처음과 일치.

확실하지는 않지만, `match` 메소드의 경우와 `search`에서 패턴에 `^` 메타 문자를 포함한 경우가 동일한 것 같다.

### $
문자열의 맨 끝과 매치.

### \A
문자열의 처음과 매치. `re.MULTILINE` 옵션을 사용할 때에는 `^`과 다르게 라인과 상관없이 전체 문자열의 처음하고만 매치된다.

### \Z
동일한 방식으로 전체 문자열의 끝과 매치.

### \b
단어 구분자(보통은 whitespace로 구분) backspace와 혼동되지 않도록 앞에 `r'\bword\b'` 와 같이 r을 꼭 붙여주어야 한다.

### \B
whitespace로 구분된 단어가 아닌 경우에만 매치된다.


## 정규식 사용하기

Method | 목적
------------ | ------------
`match()` | 문자열의 처음부터 정규식과 매치되는지 조사한다.
`search()` | 문자열 전체를 검색하여 정규식과 매치되는지 조사한다.
`findall()` | 정규식과 매치되는 모든 substring을 리스트로 리턴한다.
`finditer()` | 정규식과 매치되는 모든 substring을 iterator 객체로 리턴한다.

compile된 패턴 객체를 통해 이 메소드를 호출하는 것이 일반적이지만, 아래와 같이 re 모듈에서 바로 호출해서 컴파일과 위 메소드를 동시에 수행할 수 있다.

```
m = re.match(‘[a-z]+’, “python”)
```

`match`와 `search`의 경우에는 매치된 경우 `SRE_Match` 객체를 리턴하고 그렇지 않을 경우 `None`을 리턴한다.  `search`는 문자열 전체를 검색해서 가장 먼저 매치된 문자열 하나를 리턴한다는 것이다. 첫 번째 문자열부터 정확히 매치되어야 하는 match와 전체 substring의 리스트를 리턴하는 find 계열 메소드와 이 점에서 구분된다.

Match 객체의 메소드들은 다음과 같다.

Method | 목적
------------ | ------------
`group()` | 매치된 문자열을 리턴한다.
`start()` | 매치된 문자열의 시작 위치를 리턴한다.
`end()` | 매치된 문자열의 끝 위치를 리턴한다.
`span()` | 매치된 문자열의 (시작, 끝)에 해당하는 tuple을 리턴한다.

## Reference

- [07-3 강력한 정규 표현식의 세계로 - 점프 투 파이썬](https://wikidocs.net/4309) 
- [Python Regular Expressions](https://developers.google.com/edu/python/regular-expressions)

## Linked Post
- http://greenmon.xyz/2019/01/05/python-regexp.html






 